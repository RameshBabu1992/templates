!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"undefined"!=typeof exports?module.exports=e(require("jquery")):e(jQuery)}(function(l){if(Date.now||(Date.now=function(){return(new Date).getTime()}),!window.requestAnimationFrame){for(var i,e=["webkit","moz"],t=0;t<e.length&&!window.requestAnimationFrame;++t){var n=e[t];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}!/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)&&window.requestAnimationFrame&&window.cancelAnimationFrame||(i=0,window.requestAnimationFrame=function(e){var t=Date.now(),n=Math.max(i+16,t);return setTimeout(function(){e(i=n)},n-t)},window.cancelAnimationFrame=clearTimeout)}var a,o,r=function(){for(var e="transform WebkitTransform MozTransform OTransform msTransform".split(" "),t=document.createElement("div"),n=0;n<e.length;n++)if(t&&void 0!==t.style[e[n]])return e[n];return!1}(),m=function(){if(!window.getComputedStyle)return!1;var e,t,n=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};for(t in(document.body||document.documentElement).insertBefore(n,null),i)void 0!==n.style[t]&&(n.style[t]="translate3d(1px,1px,1px)",e=window.getComputedStyle(n).getPropertyValue(i[t]));return(document.body||document.documentElement).removeChild(n),void 0!==e&&0<e.length&&"none"!==e}(),s=-1<navigator.userAgent.toLowerCase().indexOf("android"),d=[],c=(a=0,function(e,t){var n=this;n.$item=l(e),n.defaults={speed:.5,imgSrc:null,imgWidth:null,imgHeight:null,enableTransform:!0,zIndex:-100},e=n.$item.data("jarallax")||{},n.options=l.extend({},n.defaults,e,t),n.options.speed=Math.min(1,Math.max(0,parseFloat(n.options.speed))),n.instanceID=a++,n.image={src:n.options.imgSrc||null,$container:null,$item:null,width:n.options.imgWidth||null,height:n.options.imgHeight||null,useImgTag:s},n.initImg()&&(n.init(),d.push(n))}),u=(c.prototype.initImg=function(){var e=this;return null===e.image.src&&(e.image.src=e.$item.css("background-image").replace(/^url\(['"]?/g,"").replace(/['"]?\)$/g,"")),!(!e.image.src||"none"===e.image.src)},c.prototype.init=function(){var n=this,e={position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden","pointer-events":"none",transition:"transform linear -1ms, -webkit-transform linear -1ms"},t={position:"fixed"};n.image.$container=l("<div>").css(e).css({visibility:"hidden","z-index":n.options.zIndex}).attr("id","jarallax-container-"+n.instanceID).prependTo(n.$item),t=n.image.useImgTag?(n.image.$item=l("<img>").attr("src",n.image.src),l.extend({},e,t)):(n.image.$item=l("<div>"),l.extend({"background-position":"50% 50%","background-repeat":"no-repeat no-repeat","background-image":"url("+n.image.src+")"},e,t)),n.image.$item.css(t).prependTo(n.image.$container),n.getImageSize(n.image.src,function(e,t){n.image.width=e,n.image.height=t,window.requestAnimationFrame(function(){n.coverImage(),n.clipContainer(),n.onScroll()}),n.$item.data("jarallax-original-styles",n.$item.attr("style")),setTimeout(function(){n.$item.css({"background-image":"none","background-attachment":"scroll","background-size":"auto"})},0)})},c.prototype.destroy=function(){for(var e=this,t=0,n=d.length;t<n;t++)if(d[t].instanceID===e.instanceID){d.splice(t,1);break}l("head #jarallax-clip-"+e.instanceID).remove(),e.$item.attr("style",e.$item.data("jarallax-original-styles")),e.$item.removeData("jarallax-original-styles"),e.image.$container.remove(),delete e.$item[0].jarallax},c.prototype.round=function(e){return Math.floor(100*e)/100},c.prototype.getImageSize=function(e,t){if(!e||!t)return!1;var n=new Image;n.onload=function(){t(n.width,n.height)},n.src=e},c.prototype.clipContainer=function(){var e=this,t=e.image.$container.outerWidth(!0),n=e.image.$container.outerHeight(!0),i=l("head #jarallax-clip-"+e.instanceID),e=(i.length||(l("head").append('<style type="text/css" id="jarallax-clip-'+e.instanceID+'"></style>'),i=l("head #jarallax-clip-"+e.instanceID)),["#jarallax-container-"+e.instanceID+" {","   clip: rect(0px "+t+"px "+n+"px 0);","   clip: rect(0px, "+t+"px, "+n+"px, 0);","}"].join("\n"));i[0].styleSheet?i[0].styleSheet.cssText=e:i.html(e)},c.prototype.coverImage=function(){var e,t,n,i,a,o,r,m=this;m.image.width&&m.image.height&&(e=m.image.$container.outerWidth(!0),t=m.image.$container.outerHeight(!0),o=l(window).outerWidth(!0),r=l(window).outerHeight(!0),n=m.image.width,i=m.image.height,r=(o={width:Math.max(o,e)*Math.max(m.options.speed,1),height:Math.max(r,t)*Math.max(m.options.speed,1)}).width/o.height>n/i?(a=o.width)*i/n:(a=o.height*n/i,o.height),m.image.useImgTag?(o.width=m.round(a),o.height=m.round(r),o.marginLeft=m.round(-(a-e)/2),o.marginTop=m.round(-(r-t)/2)):o.backgroundSize=m.round(a)+"px "+m.round(r)+"px",m.image.$item.css(o))},c.prototype.onScroll=function(){var e,t,n,i,a=this;a.image.width&&a.image.height&&(e=l(window).scrollTop(),i=l(window).height(),n={visibility:"visible",backgroundPosition:"50% 50%"},(t=a.$item.offset().top)+a.$item.outerHeight(!0)<e||e+i<t||(i=-(e-t)*a.options.speed,i=a.round(i),r&&a.options.enableTransform?(n.transform="translateY("+i+"px)",m&&(n.transform="translate3d(0, "+i+"px, 0)")):n.backgroundPosition="50% "+i+"px",a.image.$item.css(n)))},l(window).on("scroll.jarallax",function(){window.requestAnimationFrame(function(){for(var e=0,t=d.length;e<t;e++)d[e].onScroll()})}),l(window).on("resize.jarallax load.jarallax",function(){clearTimeout(o),o=setTimeout(function(){window.requestAnimationFrame(function(){for(var e=0,t=d.length;e<t;e++){var n=d[e];n.coverImage(),n.clipContainer(),n.onScroll()}})},100)}),l.fn.jarallax);l.fn.jarallax=function(){for(var e,t=this,n=arguments[0],i=Array.prototype.slice.call(arguments,1),a=t.length,o=0;o<a;o++)if("object"==typeof n||void 0===n?t[o].jarallax=new c(t[o],n):e=t[o].jarallax[n].apply(t[o].jarallax,i),void 0!==e)return e;return this},l.fn.jarallax.noConflict=function(){return l.fn.jarallax=u,this},l(document).on("ready.data-jarallax",function(){l("[data-jarallax]").jarallax()})});