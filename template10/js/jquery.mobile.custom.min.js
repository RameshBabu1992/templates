!function(t,n,o){"function"==typeof define&&define.amd?define(["jquery"],function(e){return o(e,t,n),e.mobile}):o(t.jQuery,t,n)}(this,document,function(e,t,n,O){e.extend(e.support,{orientation:"orientation"in t&&"onorientationchange"in t}),(X=e).event.special.throttledresize={setup:function(){X(this).bind("resize",Y)},teardown:function(){X(this).unbind("resize",Y)}},Y=function(){Z=(new Date).getTime(),250<=($=Z-_)?(_=Z,X(this).trigger("throttledresize")):(U&&clearTimeout(U),U=setTimeout(Y,250-$))},_=0,y=(b=e)(w=this),E="orientationchange",P={0:!0,180:!0},b.support.orientation&&(t=w.innerWidth||y.width(),o=w.innerHeight||y.height(),D=P[w.orientation],(t=o<t&&50<t-o)&&D||!t&&!D)&&(P={"-90":!0,90:!0}),b.event.special.orientationchange=b.extend({},b.event.special.orientationchange,{setup:function(){if(b.support.orientation&&!b.event.special.orientationchange.disabled)return!1;R=T(),y.bind("throttledresize",ue)},teardown:function(){if(b.support.orientation&&!b.event.special.orientationchange.disabled)return!1;y.unbind("throttledresize",ue)},add:function(e){var t=e.handler;e.handler=function(e){return e.orientation=T(),t.apply(this,arguments)}}}),b.event.special.orientationchange.orientation=T=function(){var e=n.documentElement;return(b.support.orientation?P[w.orientation]:e&&e.clientWidth/e.clientHeight<1.1)?"portrait":"landscape"},b.fn[E]=function(e){return e?this.bind(E,e):this.trigger(E)},b.attrFn&&(b.attrFn[E]=!0);var p=e,o=n,B=void 0;function l(e){for(;e&&void 0!==e.originalEvent;)e=e.originalEvent;return e}function s(e){for(var t,n,o={};e;){for(n in t=p.data(e,k))t[n]&&(o[n]=o.hasVirtualBinding=!0);e=e.parentNode}return o}function N(){S=!0}function j(){S=!1}function a(){V(),I=setTimeout(function(){F=I=0,z.length=0,ae=!1,N()},p.vmouse.resetTimerDuration)}function V(){I&&(clearTimeout(I),I=0)}function r(e,t,n){var o;return(n&&n[e]||!n&&function(e,t){for(var n;e;){if((n=p.data(e,k))&&(!t||n[t]))return e;e=e.parentNode}}(t.target,e))&&(o=function(e,t){var n,o,i,s,a,r,c,u=e.type;if((e=p.Event(e)).type=t,n=e.originalEvent,o=p.event.props,-1<u.search(/^(mouse|click)/)&&(o=oe),n)for(a=o.length;a;)e[i=o[--a]]=n[i];if(-1<u.search(/mouse(down|up)|click/)&&!e.which&&(e.which=1),-1!==u.search(/^touch/)&&(u=(t=l(n)).touches,t=t.changedTouches,s=u&&u.length?u[0]:t&&t.length?t[0]:B))for(r=0,c=ne.length;r<c;r++)e[i=ne[r]]=s[i];return e}(t,e),p(t.target).trigger(o)),o}function W(e){var t=p.data(e.target,ee);ae||F&&F===t||!(t=r("v"+e.type,e))||(t.isDefaultPrevented()&&e.preventDefault(),t.isPropagationStopped()&&e.stopPropagation(),!t.isImmediatePropagationStopped())||e.stopImmediatePropagation()}function q(e){var t,n=l(e).touches;n&&1===n.length&&(t=s(n=e.target)).hasVirtualBinding&&(F=ce++,p.data(n,ee,F),V(),j(),x=!1,n=l(e).touches[0],ie=n.pageX,se=n.pageY,r("vmouseover",e,t),r("vmousedown",e,t))}function Q(e){S||(x||r("vmousecancel",e,s(e.target)),x=!0,a())}function A(e){var t,n,o,i;S||(t=l(e).touches[0],n=x,o=p.vmouse.moveDistanceThreshold,i=s(e.target),(x=x||Math.abs(t.pageX-ie)>o||Math.abs(t.pageY-se)>o)&&!n&&r("vmousecancel",e,i),r("vmousemove",e,i),a())}function C(e){var t,n;S||(N(),r("vmouseup",e,t=s(e.target)),x||(n=r("vclick",e,t))&&n.isDefaultPrevented()&&(n=l(e).changedTouches[0],z.push({touchID:F,x:n.clientX,y:n.clientY}),ae=!0),r("vmouseout",e,t),x=!1,a())}function G(e){var t,n=p.data(e,k);if(n)for(t in n)if(n[t])return 1}function J(){}var c,i,u,h,K,d,v,f,g,m,b,w,T,R,D,o,y,E,P,X,U,Z,$,Y,_,k="virtualMouseBindings",ee="virtualTouchID",te="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),ne="clientX clientY pageX pageY screenX screenY".split(" "),t=p.event.mouseHooks?p.event.mouseHooks.props:[],oe=p.event.props.concat(t),M={},I=0,ie=0,se=0,x=!1,z=[],ae=!1,S=!1,re="addEventListener"in o,L=p(o),ce=1,F=0;for(p.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500},i=0;i<te.length;i++)p.event.special[te[i]]=function(n){var o=n.substr(1);return{setup:function(){G(this)||p.data(this,k,{}),p.data(this,k)[n]=!0,M[n]=(M[n]||0)+1,1===M[n]&&L.bind(o,W),p(this).bind(o,J),re&&(M.touchstart=(M.touchstart||0)+1,1===M.touchstart)&&L.bind("touchstart",q).bind("touchend",C).bind("touchmove",A).bind("scroll",Q)},teardown:function(){--M[n],M[n]||L.unbind(o,W),re&&(--M.touchstart,M.touchstart||L.unbind("touchstart",q).unbind("touchmove",A).unbind("touchend",C).unbind("scroll",Q));var e=p(this),t=p.data(this,k);t&&(t[n]=!1),e.unbind(o,J),G(this)||e.removeData(k)}}}(te[i]);function H(e,t,n,o){var i=n.type;n.type=t,o?u.event.trigger(n,K,e):u.event.dispatch.call(e,n),n.type=i}function ue(){var e=T();e!==R&&(R=e,y.trigger(E))}re&&o.addEventListener("click",function(e){var t,n,o,i,s,a=z.length,r=e.target;if(a)for(t=e.clientX,n=e.clientY,c=p.vmouse.clickDistanceThreshold,o=r;o;){for(i=0;i<a;i++)if(s=z[i],o===r&&Math.abs(s.x-t)<c&&Math.abs(s.y-n)<c||p.data(o,ee)===s.touchID)return e.preventDefault(),void e.stopPropagation();o=o.parentNode}},!0),e.mobile={},D=e,t={touch:"ontouchend"in n},D.mobile.support=D.mobile.support||{},D.extend(D.support,t),D.extend(D.mobile.support,t),h=this,d=(u=e)(n),t=u.mobile.support.touch,v="touchmove scroll",f=t?"touchstart":"mousedown",g=t?"touchend":"mouseup",m=t?"touchmove":"mousemove",u.each("touchstart touchmove touchend tap taphold swipe swipeleft swiperight scrollstart scrollstop".split(" "),function(e,t){u.fn[t]=function(e){return e?this.bind(t,e):this.trigger(t)},u.attrFn&&(u.attrFn[t]=!0)}),u.event.special.scrollstart={enabled:!0,setup:function(){function t(e,t){H(i,(n=t)?"scrollstart":"scrollstop",e)}var n,o,i=this;u(i).bind(v,function(e){u.event.special.scrollstart.enabled&&(n||t(e,!0),clearTimeout(o),o=setTimeout(function(){t(e,!1)},50))})},teardown:function(){u(this).unbind(v)}},u.event.special.tap={tapholdThreshold:750,emitTapOnTaphold:!0,setup:function(){var a=this,r=u(a),c=!1;r.bind("vmousedown",function(e){function t(){clearTimeout(i)}function n(){t(),r.unbind("vclick",o).unbind("vmouseup",t),d.unbind("vmousecancel",n)}function o(e){n(),c||s!==e.target?c&&e.stopPropagation():H(a,"tap",e)}if(c=!1,e.which&&1!==e.which)return!1;var i,s=e.target;r.bind("vmouseup",t).bind("vclick",o),d.bind("vmousecancel",n),i=setTimeout(function(){u.event.special.tap.emitTapOnTaphold||(c=!0),H(a,"taphold",u.Event("taphold",{target:s}))},u.event.special.tap.tapholdThreshold)})},teardown:function(){u(this).unbind("vmousedown").unbind("vclick").unbind("vmouseup"),d.unbind("vmousecancel")}},u.event.special.swipe={scrollSupressionThreshold:30,durationThreshold:1e3,horizontalDistanceThreshold:30,verticalDistanceThreshold:30,getLocation:function(e){var t=h.pageXOffset,n=h.pageYOffset,o=e.clientX,i=e.clientY;return 0===e.pageY&&Math.floor(i)>Math.floor(e.pageY)||0===e.pageX&&Math.floor(o)>Math.floor(e.pageX)?(o-=t,i-=n):(i<e.pageY-n||o<e.pageX-t)&&(o=e.pageX-t,i=e.pageY-n),{x:o,y:i}},start:function(e){var t=e.originalEvent.touches?e.originalEvent.touches[0]:e,t=u.event.special.swipe.getLocation(t);return{time:(new Date).getTime(),coords:[t.x,t.y],origin:u(e.target)}},stop:function(e){e=e.originalEvent.touches?e.originalEvent.touches[0]:e,e=u.event.special.swipe.getLocation(e);return{time:(new Date).getTime(),coords:[e.x,e.y]}},handleSwipe:function(e,t,n,o){var i;return t.time-e.time<u.event.special.swipe.durationThreshold&&Math.abs(e.coords[0]-t.coords[0])>u.event.special.swipe.horizontalDistanceThreshold&&Math.abs(e.coords[1]-t.coords[1])<u.event.special.swipe.verticalDistanceThreshold&&(i=e.coords[0]>t.coords[0]?"swipeleft":"swiperight",H(n,"swipe",u.Event("swipe",{target:o,swipestart:e,swipestop:t}),!0),H(n,i,u.Event(i,{target:o,swipestart:e,swipestop:t}),!0),!0)},eventInProgress:!1,setup:function(){var s=this,e=u(s),a={},t=u.data(this,"mobile-events");t||u.data(this,"mobile-events",t={length:0}),t.length++,(t.swipe=a).start=function(e){var t,n,o,i;u.event.special.swipe.eventInProgress||(u.event.special.swipe.eventInProgress=!0,n=u.event.special.swipe.start(e),o=e.target,i=!1,a.move=function(e){n&&(t=u.event.special.swipe.stop(e),i||(i=u.event.special.swipe.handleSwipe(n,t,s,o))&&(u.event.special.swipe.eventInProgress=!1),Math.abs(n.coords[0]-t.coords[0])>u.event.special.swipe.scrollSupressionThreshold)&&e.preventDefault()},a.stop=function(){i=!0,u.event.special.swipe.eventInProgress=!1,d.off(m,a.move),a.move=null},d.on(m,a.move).one(g,a.stop))},e.on(f,a.start)},teardown:function(){var e,t=u.data(this,"mobile-events");t&&(e=t.swipe,delete t.swipe,t.length--,0===t.length)&&u.removeData(this,"mobile-events"),e&&(e.start&&u(this).off(f,e.start),e.move&&d.off(m,e.move),e.stop)&&d.off(g,e.stop)}},u.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(e,t){u.event.special[e]={setup:function(){u(this).bind(t,u.noop)},teardown:function(){u(this).unbind(t)}}})});