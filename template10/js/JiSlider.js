!function(p){p.fn.JiSlider=function(t){function i(t,i,s,r,e,n,o){this.slider=l,this.slides=t,this.width=this.slider.width(),this.ul=this.slider.find("ul"),this.index=i,this.auto=!0,this.time=r,this.stay=e,this.easing=n,this.reverse=o?-1:1,this.play=setInterval(this.autoroll.bind(this),this.stay)}var l=this,s=(new Date).getTime(),r=(i.prototype={init:function(t){p.extend(this,t)},roll:function(t){var i=-(this.index*this.width);r.css({"-webkit-transform":"translateX("+i+"px)","-webkit-transition":"-webkit-transform "+t/1e3+"s "+this.easing,"-ms-transform":"translateX("+i+"px)","-ms-transition":"-ms-transform "+t/1e3+"s "+this.easing,transform:"translateX("+i+"px)",transition:"transform "+t/1e3+"s "+this.easing}),this.check(),this.controller&&(this.controller.find(".jislider__button[data-index="+this.index+"]").addClass("jislider__on").css("background-color",n.color),this.controller.find(".jislider__button[data-index!="+this.index+"]").removeClass("jislider__on").css("background-color","transparent"))},autoroll:function(){this.auto&&(this.index+=this.reverse),this.roll(this.time)},check:function(){var t=this;this.index>this.slides?(this.index=1,setTimeout(function(){t.roll(0)},this.time)):this.index<1&&(this.index=a,setTimeout(function(){t.roll(0)},this.time))},control:function(t){this.timeCheck()&&(this.index=t,this.reset(),this.roll(this.time))},timeCheck:function(){var t=(new Date).getTime();return t-s>this.time&&(s=t,!0)},reset:function(){clearInterval(this.play),this.play=setInterval(this.autoroll.bind(this),this.stay)},resize:function(t){this.width=t,this.reset(),this.roll(0)}},this.find("ul")),e=this.find("ul li"),n=p.extend({auto:!0,start:1,time:600,stay:3e3,controller:!0,easing:"ease",color:"#fff",reverse:!1},t),o=this.width(),a=this.find("ul li").length;if(n.start>a)throw"Start value is bigger than number of slides";var t=e.first().clone(),d=e.last().clone(),d=(r.prepend(d),r.append(t),this.css({position:"relative",overflow:"hidden"}),r.css({width:100*(a+2)+"%","-webkit-transform":"translateX("+-n.start*o+"px)","-ms-transform":"translateX("+-n.start*o+"px)",transform:"translateX("+-n.start*o+"px)"}),e=this.find("ul li"),this.find("ul li img")),h=(e.css({width:100/(a+2)+"%"}),d.each(function(){var t=p("<div>",{class:"jislider__img"}).css({backgroundImage:"url("+p(this).attr("src")+")"});p(this).after(t),p(this).remove()}),new i(a,n.start,n.auto,n.time,n.stay,n.easing,n.reverse));if(n.controller){for(var t=p("<div>",{class:"jislider__left-arrow"}).click(function(){h.control(--h.index)}),e=p("<div>",{class:"jislider__left-arrow__top"}).css({backgroundColor:n.color}),d=p("<div>",{class:"jislider__left-arrow__bottom"}).css({backgroundColor:n.color}),c=p("<div>",{class:"jislider__right-arrow"}).click(function(){h.control(++h.index)}),u=p("<div>",{class:"jislider__right-arrow__top"}).css({backgroundColor:n.color}),f=p("<div>",{class:"jislider__right-arrow__bottom"}).css({backgroundColor:n.color}),m=p("<div>",{class:"jislider__controller"}).css({width:20*a}),_=new Array,v=0;v<a;v++)_[v]=p("<div>",{class:"jislider__button","data-index":v+1}).css({border:"1px solid "+n.color}).click(function(){var t=p(this).data("index");h.control(t)});this.append(t,c,m),t.append(e,d),c.append(u,f),m.append(_),h.init({controller:m})}return h.roll(0),p(window).resize(function(){o=l.width(),h.resize(o)}),this}}(jQuery);